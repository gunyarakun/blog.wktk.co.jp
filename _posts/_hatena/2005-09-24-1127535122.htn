---
layout: post
title: パフォーマンスアップ！
tags: 正規表現
lang: ja
old_url: http://d.hatena.ne.jp/tasukuchan/20050924/1127535122
---
Perlソース中の正規表現の最適化をしています。
後方一致をsubstr使ってやったり、とか。

詳説 正規表現を読んでいないのでアレですが、
すくなくとも文を前から読んでいく仮定のもとで
決定性オートマトンが容易に思いつかない正規表現は遅いような気がする。

逆に、決定性オートマトンが容易に思いつくやつはかなり速い。
substrとかsplitとかeqとか&&とか||の組み合わせをして
読みにくいけど最適化したつもりのソースにすると、
逆に遅くなってしまう。

意気揚揚と書き直したのに、
Benchmarkで計ったら２倍近く時間かかってるんだもん…

ここらへんはPerl優秀だ。
や、substrとかsplitが遅いだけなのかもしらんけど。
drk7.jpにsplitのxsバージョンがあったな。
いつか試してみるか。

